

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/icon/browser_tab.svg">
  <link rel="icon" href="/img/icon/browser_tab.svg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Go7">
  <meta name="keywords" content="">
  
    <meta name="description" content="Physically-Based Rendering (PBR)  Everything in rendering should be physically based Materials, lighting, camera, light transport, etc. Not iust materials, but usually referred to as materials    PB">
<meta property="og:type" content="article">
<meta property="og:title" content="GAMES 202 - Physically-Based Rendering">
<meta property="og:url" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/index.html">
<meta property="og:site_name" content="Go7">
<meta property="og:description" content="Physically-Based Rendering (PBR)  Everything in rendering should be physically based Materials, lighting, camera, light transport, etc. Not iust materials, but usually referred to as materials    PB">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/microfacets.png">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/Beckmann.png">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/GGX.png">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/GGX-comp.png">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/GTR.png">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/geom.png">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/multibounces.png">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/LTC.png">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/Disney.png">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/outline.png">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/color-blocks.png">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/quant.png">
<meta property="og:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/sketch.png">
<meta property="article:published_time" content="2025-09-16T23:20:29.997Z">
<meta property="article:modified_time" content="2025-09-17T07:02:04.579Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="graphics">
<meta property="article:tag" content="GAMES202">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/2025/09/16/GAMES202-L1011-PBR/microfacets.png">
  
  
  
  <title>GAMES 202 - Physically-Based Rendering - Go7</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":false,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":false,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Go7</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Dive in</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/background/swim_from_above_2.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="GAMES 202 - Physically-Based Rendering"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-09-16 16:20" pubdate>
          September 16, 2025 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          179 words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          2 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">GAMES 202 - Physically-Based Rendering</h1>
            
            
              <div class="markdown-body">
                
                <ul>
<li>
<p>Physically-Based Rendering (PBR)</p>
<ul>
<li>Everything in rendering should be physically based</li>
<li>Materials, lighting, camera, light transport, etc.</li>
<li>Not iust materials, but usually referred to as materials</li>
</ul>
</li>
<li>
<p>PBR materials in RTR</p>
<ul>
<li>For surfaces, mostly just microfacet models (used wrong so not PBR) and Disney principled BRDFs (artist friendly but still not PBR)</li>
<li>For volumes, mostly focused onfast and approximate single scattering and multiple scattering (for cloud, hair, skin, etc.)</li>
<li>Usually not much new theory, but a lot of implementation hacks</li>
<li>Still, performance (speed) is the key factor to consider</li>
</ul>
</li>
</ul>
<h1 id="microfacets">Microfacets</h1>
<p><img src="microfacets.png" alt="Microfacets"></p>
<ul>
<li>Normal Distribution Function (NDF)
<ul>
<li>Key: the distribution of microfacets’ normals
<ul>
<li>Concentrated &lt;==&gt; glossy</li>
<li>Spread &lt;==&gt; diffuse</li>
</ul>
</li>
<li>various models to describe it: Beckmann, GGX, etc.
<ul>
<li>Backmann<br>
<img src="Beckmann.png" alt="Beckmann"></li>
<li>GGX<br>
<img src="GGX.png" alt="GGX"><br>
Note that the long tail of GGX make it smoother. See the figure below, when Backmann and GGX have the same highlight area, Backmann has obvious boundary arond the highlight area while GGX has bloom around it. And for more rough material, GGX can make it more diffuse and natural. This is why in industry people usually choose GGX.<br>
<img src="GGX-comp.png" alt="Backmann vs. GGX"></li>
<li>GTR<br>
<img src="GTR.png" alt="GTR"></li>
</ul>
</li>
</ul>
</li>
<li>Geometry Term<br>
If not G term, when n dot i == 0 (graze angle), the denominator of the brdf equation can be really large.<br>
<img src="geom.png" alt="G Term"></li>
<li>Fresnel Term</li>
</ul>
<h1 id="multiple-bounces">Multiple bounces</h1>
<ul>
<li>Missing energy!
<ul>
<li>Especially prominent when roughness is high (when roughness is higher, more light will be reflected and these reflected light are lost)<br>
<img src="multibounces.png" alt="multiple bounces"></li>
</ul>
</li>
<li>Adding back the missing energy?
<ul>
<li>Accurate methods exist [Heitz et al. 2016]</li>
<li>But can be too slow for RTR</li>
</ul>
</li>
<li>The Kulla-Conty approximation
<ul>
<li>TBD (L10 1:03:10)</li>
</ul>
</li>
</ul>
<h1 id="shading-microfacet-models-using-linearly-transformed-cosines-ltc">Shading Microfacet Models using Linearly Transformed Cosines (LTC)</h1>
<ul>
<li><strong>Solves the shading of microfacet models</strong>
<ul>
<li>Mainly on GGX, though others are also fine</li>
<li>Not considering shadows</li>
<li>Under polygon-shaped lighting</li>
</ul>
</li>
<li>Key idea
<ul>
<li>Any outgoing 2D BRDF lobe can be transformed to a cosine</li>
<li>The shape of the light can also be transformed along</li>
<li>Integrating the transformed light on a cosine lobe is analytic</li>
</ul>
</li>
<li>Observations
<ul>
<li>BRDF -&gt; Cosine</li>
<li>Direction: i -&gt; i’</li>
<li>Domain to integrate: p -&gt; p’</li>
</ul>
</li>
<li>Approach<br>
<img src="LTC.png" alt="LTC Approach"></li>
</ul>
<h1 id="disneys-principled-brdf">Disney’s Principled BRDF</h1>
<ul>
<li>
<p>Motivation</p>
<ul>
<li>No physically-based materials are good at represent all real materials
<ul>
<li>e.g. lacking diffuse term in most microfacet models</li>
</ul>
</li>
<li>Physically-based materials are not artist friendly
<ul>
<li>e.g. “the complex index of refraction n-ik”</li>
</ul>
</li>
</ul>
</li>
<li>
<p>High level design goal</p>
<ul>
<li>Art directable, not necessarily physically correct.</li>
<li>But again, referred to as PBR in real-time rendering.</li>
</ul>
</li>
<li>
<p>What is “principled”?</p>
<ul>
<li>Intuitive rather than physical parameters should be used.</li>
<li>There should be as few parameters as possible.</li>
<li>Parameters should be zero to one over their plausible range.</li>
<li>Parameters should be allowed to be pushed beyond their plausible range where it makes sense.</li>
<li>All combinations of parameters should be as robust and plausibleas possible.</li>
</ul>
</li>
<li>
<p>How does it work?</p>
<ul>
<li>subsurface: more diffuse than diffuse</li>
<li>specularTint: specular with specific color</li>
<li>sheen: simulate the soft, fuzzy highlights characteristic of microfiber surfaces, like velvet, satin, or felt. This effect is caused by tiny fibers sticking up from the surface that scatter light.</li>
<li>sheenTint: This value controls the color of the sheen highlight. By default, the sheen is white. The sheenTint parameter allows you to blend the material’s base color into the sheen highlight, creating a richer, more saturated, and more realistic look for colored fabrics. A value of 0 gives a white sheen, while a value of 1 fully tints the sheen with the object’s base color.</li>
<li>clearcoat: simulate a thin, transparent layer of lacquer or varnish on top of a base material. This is common on materials like car paint, polished wood, or carbon fiber. Clearcoat value controls the strength or thickness of the transparent layer.</li>
<li>clearcoatGlossy: This controls the smoothness or sharpness of the reflections on the clearcoat layer itself. A high “glossy” value (or low “roughness”) results in sharp, mirror-like reflections on the coating. A lower value simulates a rougher, more diffuse coating, resulting in blurry or hazy reflections.<br>
<img src="Disney.png" alt="Param table"></li>
</ul>
</li>
<li>
<p>Pros and Cons</p>
<ul>
<li>Easy-to-understand / control</li>
<li>A wide range of materials in a single mode</li>
<li>Open source implementation is available</li>
<li>Not physically based</li>
<li>Huge parameter space</li>
</ul>
</li>
</ul>
<h1 id="non-photorealistic-rendering-npr-fast-and-reliable-stylization">Non-Photorealistic Rendering (NPR) == (fast and reliable) stylization</h1>
<ul>
<li>Characteristics of NPR
<ul>
<li>Starts from photorealistic rendering</li>
<li>Exploits abstraction</li>
<li>Strengthens important parts</li>
</ul>
</li>
</ul>
<h2 id="outline-rendering">Outline Rendering</h2>
<ul>
<li>
<p>Outlines are not just contours</p>
<ul>
<li><em>B</em>oundary / border edge</li>
<li><em>C</em>rease (折痕)</li>
<li><em>M</em>aterial edge</li>
<li><em>S</em>ilhouette edge (it should be the outermost edge and should be shared by several faces)<br>
<img src="outline.png" alt="outlines"></li>
</ul>
</li>
<li>
<p>Implementations</p>
<ul>
<li>Shading: shading normal contour edges
<ul>
<li>Darken the surface area where the shading <strong>normal is perpendicular to viewing direction</strong></li>
<li>Use smoothstep() to create edge fading effect</li>
<li>issue: edge at different places may have different witdths. Wider if the normals change smoothly and narrower if the normals change quickly.</li>
</ul>
</li>
<li>Geometry: Backface fattening
<ul>
<li>Render front face normally</li>
<li><strong>“Fatten” backfaces (make backfaces the expected edge color), then render again</strong></li>
<li>Extension: fatten along vertex normals</li>
</ul>
</li>
<li>Image: Edge detection in images
<ul>
<li>Usually use a <strong>Sobel detector</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="color-blocks">Color blocks</h2>
<ul>
<li>Two different ways
<ul>
<li>Hard shading: thresholding on shading</li>
<li>Posterization: thresholding on final image color<br>
<img src="color-blocks.png" alt="color blocks"></li>
</ul>
</li>
<li>May not be binary: Quantization<br>
<img src="quant.png" alt="quantization"></li>
<li>Different styles on different components</li>
</ul>
<h2 id="strokes-surface-stylization">Strokes Surface Stylization</h2>
<ul>
<li>Sometimes we do not want color blocks. Instead we want to mimic sketching.</li>
<li>Idea:
<ul>
<li>Replace point-wise shading with <strong>pre-generated stroke textures</strong></li>
<li>Density?</li>
<li>Continuity?</li>
</ul>
</li>
<li>Tonal art maps (TAMs)
<ul>
<li>Strokes of different densities</li>
<li>Each density has a MIPMAP (use mipmap to avoid the effect when the object is farther the texture density increases and so the texture looks darker)<br>
<img src="sketch.png" alt="sketch style"></li>
</ul>
</li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Learning/" class="category-chain-item">Learning</a>
  
  
    <span>></span>
    
  <a href="/categories/Learning/Graphics/" class="category-chain-item">Graphics</a>
  
  
    <span>></span>
    
  <a href="/categories/Learning/Graphics/GAMES/" class="category-chain-item">GAMES</a>
  
  

  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/graphics/" class="print-no-link">#graphics</a>
      
        <a href="/tags/GAMES202/" class="print-no-link">#GAMES202</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>GAMES 202 - Physically-Based Rendering</div>
      <div>http://example.com/2025/09/16/GAMES202-L1011-PBR/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Go7</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>September 16, 2025</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/09/14/GAMES202-L070809-GI/" title="GAMES 202 - Global Illumination">
                        <span class="hidden-mobile">GAMES 202 - Global Illumination</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  




  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       Go7 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>







  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
